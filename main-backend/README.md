# Main backend

## Todo list

### Docker
- [x] set up docker for database on local port 5433(5432 in docker connection)
    - [x] connect database on docker using Dbeaver (use port 5433 because 5432 was used by postgres local)
    - [x] node service connect with database in docker
    - [x] use volume for binding database
- [x] set up docker for node server on local port 3000
    - [x] install package for connect database
    - [x] install package for api 
    - [x] connect database in local(use port 5433)
    - [x] connect database in docker(use port 5432)
### Database setup
- [x] create sql file
    - [x] create users table
    - [x] create documents table
- [ ] use migratation (if have time)
### API endpoint
- [x] first api endpoint run port 3000 local
    - [x] api return list of all table for debuging
- [x] Design RESTful API endpoints
    - [x] Define clear resource naming conventions
        - [x] create domain entities
            - [x] documents
            - [x] files
            - [x] chat_message
            - [x] chat_session
        - [x] create repository interface (port)
            - [x] IDocumentRepository
            - [x] IFileRepository
        - [x] create Usecase files
            - [x] CreateDocument
            - [x] GetDocumentByUser
            - [x] UpdateDocument
            - [x] DeleteDocument
            - [x] CreateFile
            - [x] GetFileById
            - [x] GetFileByDocumentId
            - [x] UpdateFile
            - [x] DeleteFile
        - [x] implement repository
            - [x] CreateDocument
            - [x] GetDocumentByUser
            - [x] UpdateDocument
            - [x] DeleteDocument
            - [x] CreateFile
            - [x] GetFileById
            - [x] GetFileByDocumentId
            - [x] UpdateFile
            - [x] DeleteFile
        - [x] implement usecase
            - [x] CreateDocument
            - [x] GetDocumentByUser
            - [x] UpdateDocument
            - [x] DeleteDocument
            - [x] CreateFile
            - [x] GetFileById
            - [x] GetFileByDocumentId
            - [x] UpdateFile
            - [x] DeleteFile
        - [x] implement controller
            - [x] CreateDocument
            - [x] GetDocumentByUser
            - [x] UpdateDocument
            - [x] DeleteDocument
            - [x] CreateFile
            - [x] GetFileById
            - [x] GetFileByDocumentId
            - [x] UpdateFile
            - [x] DeleteFile
        - [x] implement routes
            - [x] CreateDocument
            - [x] GetDocumentByUser
            - [x] UpdateDocument
            - [x] DeleteDocument
            - [x] CreateFile
            - [x] GetFileById
            - [x] GetFileByDocumentId
            - [x] UpdateFile
            - [x] DeleteFile
        - [] implement ai-service call
            - [x] interface
            - [x] call ai-services
            - [ ] implement webhook for trigger processing status
    - [x] Use proper HTTP methods (GET, POST, PUT, DELETE)
    - [ ] Document endpoints with OpenAPI/Swagger
- [x] Implement input validation and error handling
    - [x] Validate request payloads
    - [x] Return meaningful error messages and status codes
- [x] Add authentication and authorization
    - [x] register
        - [x] unit test for register
            - [x] pass all test case
        - [x] response in DTO for security
    - [x] login
        - [x] middleware authentication
        - [x] unit test for login
    - [x] Implement JWT or OAuth2
    - [x] Protect sensitive endpoints
- [x] Write unit and integration tests for endpoints
    - [x] Use a testing framework (e.g., Jest, Mocha)
    - [x] Mock database and external dependencies
- [ ] Set up logging and monitoring
    - [ ] Log requests and errors
    - [ ] Integrate with monitoring tools
### clean architecture
- [x] project structure for clean architecture
- [x] first api end point health check on api/v1/healthy run on local
    ### Suggested Git Branches

    - `feature/api-design`
    - `feature/api-validation`
    - `feature/api-auth`
    - `feature/api-testing`
    - `feature/api-logging`